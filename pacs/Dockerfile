FROM golang:1.16.0-alpine AS build
WORKDIR /src
RUN apk --no-cache add build-base git mercurial gcc
COPY src .
RUN go build -o /bin/mqtt-http-pacs .

FROM alpine
WORKDIR /app
COPY --from=build /bin/mqtt-http-pacs /app/
CMD ["./mqtt-http-pacs"]